{"version":3,"sources":["components/Navbar.js","components/Main.js","components/App.js","index.js"],"names":["Navbar","_ref","account","react_default","a","createElement","className","href","target","rel","id","width","height","src","concat","Identicon","toString","Main","createProduct","purchaseProduct","products","_useState","useState","name","price","_useState2","Object","slicedToArray","product","setProduct","onChange","e","objectSpread","defineProperty","value","onSubmit","preventDefault","console","log","window","web3","utils","toWei","type","placeholder","required","scope","map","key","fromWei","owner","onClick","event","App","setAccount","_useState3","_useState4","productCount","setProductCount","_useState5","_useState6","setproducts","_useState7","_useState8","loading","setLoading","_useState9","_useState10","marketplace","setMarketPlace","useEffect","loadWeb3","loadBlockchainData","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","ethereum","Web3","enable","currentProvider","alert","stop","apply","this","arguments","_ref2","_callee2","accounts","networkId","networkData","_marketplace","_productCount","i","_context2","eth","getAccounts","sent","net","getId","Marketplace","networks","Contract","abi","address","methods","call","push","components_Navbar","role","components_Main","send","from","once","receipt","ReactDOM","render","src_components_App","document","getElementById"],"mappings":"22wGAwCeA,EArCA,SAAAC,GAAiB,IAAdC,EAAcD,EAAdC,QAChB,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kEACbH,EAAAC,EAAAC,cAAA,KACEC,UAAU,sCACVC,KAAK,yCACLC,OAAO,SACPC,IAAI,uBAJN,mBASAN,EAAAC,EAAAC,cAAA,MAAIC,UAAU,mBACZH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,oDACZH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,cACfH,EAAAC,EAAAC,cAAA,SAAOK,GAAG,WAAWR,IAGtBA,EACCC,EAAAC,EAAAC,cAAA,OACEC,UAAU,OACVK,MAAM,KACNC,OAAO,KACPC,IAAG,yBAAAC,OAA2B,IAAIC,IAChCb,EACA,IACAc,cAGJb,EAAAC,EAAAC,cAAA,kCCoEGY,EAlGF,SAAAhB,GAA2D,IAAxDiB,EAAwDjB,EAAxDiB,cAAeC,EAAyClB,EAAzCkB,gBAAiBC,EAAwBnB,EAAxBmB,SAAUlB,EAAcD,EAAdC,QAAcmB,EACxCC,mBAAS,CACrCC,KAAM,GACNC,MAAO,KAH6DC,EAAAC,OAAAC,EAAA,EAAAD,CAAAL,EAAA,GAC/DO,EAD+DH,EAAA,GACtDI,EADsDJ,EAAA,GAM9DF,EAAgBK,EAAhBL,KAAMC,EAAUI,EAAVJ,MAERM,EAAW,SAACC,GAChBF,EAAWH,OAAAM,EAAA,EAAAN,CAAA,GAAKE,EAANF,OAAAO,EAAA,EAAAP,CAAA,GAAgBK,EAAEvB,OAAOe,KAAOQ,EAAEvB,OAAO0B,UASrD,OACE/B,EAAAC,EAAAC,cAAA,OAAKK,GAAG,WACNP,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,QAAM8B,SATO,SAACJ,GAChBA,EAAEK,iBACFC,QAAQC,IAAIf,EAAMgB,OAAOC,KAAKC,MAAMC,MAAMlB,EAAMR,WAAY,UAC5DE,EAAcK,EAAMgB,OAAOC,KAAKC,MAAMC,MAAMlB,EAAMR,WAAY,YAO1Db,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,SACEK,GAAG,cACHiC,KAAK,OACLrC,UAAU,eACVsC,YAAY,eACZrB,KAAK,OACLW,MAAOX,EACPO,SAAUA,EACVe,UAAQ,KAGZ1C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,SACEK,GAAG,eACHiC,KAAK,OACLrC,UAAU,eACVsC,YAAY,gBACZrB,KAAK,QACLW,MAAOV,EACPM,SAAUA,EACVe,UAAQ,KAGZ1C,EAAAC,EAAAC,cAAA,UAAQsC,KAAK,SAASrC,UAAU,mBAAhC,gBAIFH,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SACfH,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIyC,MAAM,OAAV,KACA3C,EAAAC,EAAAC,cAAA,MAAIyC,MAAM,OAAV,QACA3C,EAAAC,EAAAC,cAAA,MAAIyC,MAAM,OAAV,SACA3C,EAAAC,EAAAC,cAAA,MAAIyC,MAAM,OAAV,SACA3C,EAAAC,EAAAC,cAAA,MAAIyC,MAAM,UAGd3C,EAAAC,EAAAC,cAAA,SAAOK,GAAG,eACPU,EAAS2B,IAAI,SAACnB,EAASoB,GACtB,OACE7C,EAAAC,EAAAC,cAAA,MAAI2C,IAAKA,GACP7C,EAAAC,EAAAC,cAAA,MAAIyC,MAAM,OAAOlB,EAAQlB,GAAGM,YAC5Bb,EAAAC,EAAAC,cAAA,UAAKuB,EAAQL,MACbpB,EAAAC,EAAAC,cAAA,UACGkC,OAAOC,KAAKC,MAAMQ,QAAQrB,EAAQJ,MAAMR,WAAY,SAAU,IADjE,OAIAb,EAAAC,EAAAC,cAAA,UAAKuB,EAAQsB,OACb/C,EAAAC,EAAAC,cAAA,UACGH,IAAY0B,EAAQsB,MACnB/C,EAAAC,EAAAC,cAAA,UACEC,UAAU,kBACViB,KAAMK,EAAQlB,GACdwB,MAAON,EAAQJ,MACf2B,QAAS,SAACC,GACRjC,EAAgBiC,EAAM5C,OAAOe,KAAM6B,EAAM5C,OAAO0B,SALpD,OAWA/B,EAAAC,EAAAC,cAAA,UAAQC,UAAU,mBAAlB,iBCmBL+C,EApGH,WAAM,IAAAhC,EACcC,mBAAS,IADvBG,EAAAC,OAAAC,EAAA,EAAAD,CAAAL,EAAA,GACTnB,EADSuB,EAAA,GACA6B,EADA7B,EAAA,GAAA8B,EAEwBjC,mBAAS,MAFjCkC,EAAA9B,OAAAC,EAAA,EAAAD,CAAA6B,EAAA,GAETE,EAFSD,EAAA,GAEKE,EAFLF,EAAA,GAAAG,EAGgBrC,mBAAS,IAHzBsC,EAAAlC,OAAAC,EAAA,EAAAD,CAAAiC,EAAA,GAGTvC,EAHSwC,EAAA,GAGCC,EAHDD,EAAA,GAAAE,EAIcxC,oBAAS,GAJvByC,EAAArC,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,GAITE,EAJSD,EAAA,GAIAE,EAJAF,EAAA,GAAAG,EAKsB5C,mBAAS,IAL/B6C,EAAAzC,OAAAC,EAAA,EAAAD,CAAAwC,EAAA,GAKTE,EALSD,EAAA,GAKIE,EALJF,EAAA,GAOhBG,oBAAU,WACRC,IACAC,KAEC,IAEH,IAAMD,EAAQ,eAAAtE,EAAAyB,OAAA+C,EAAA,EAAA/C,CAAAgD,EAAAtE,EAAAuE,KAAG,SAAAC,IAAA,OAAAF,EAAAtE,EAAAyE,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACXzC,OAAO0C,SADI,CAAAH,EAAAE,KAAA,eAEbzC,OAAOC,KAAO,IAAI0C,IAAK3C,OAAO0C,UAFjBH,EAAAE,KAAA,EAGPzC,OAAO0C,SAASE,SAHT,OAAAL,EAAAE,KAAA,eAIJzC,OAAOC,KAChBD,OAAOC,KAAO,IAAI0C,IAAK3C,OAAOC,KAAK4C,iBAEnC7C,OAAO8C,MACL,uEARW,wBAAAP,EAAAQ,SAAAV,MAAH,yBAAA3E,EAAAsF,MAAAC,KAAAC,YAAA,GAaRjB,EAAkB,eAAAkB,EAAAhE,OAAA+C,EAAA,EAAA/C,CAAAgD,EAAAtE,EAAAuE,KAAG,SAAAgB,IAAA,IAAAnD,EAAAoD,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAArE,EAAA,OAAA8C,EAAAtE,EAAAyE,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cACnBxC,EAAOD,OAAOC,KADK0D,EAAAlB,KAAA,EAGFxC,EAAK2D,IAAIC,cAHP,cAGnBR,EAHmBM,EAAAG,KAIzB/C,EAAWsC,EAAS,IAJKM,EAAAlB,KAAA,EAKDxC,EAAK2D,IAAIG,IAAIC,QALZ,cAKnBV,EALmBK,EAAAG,KAMnBP,EAAcU,EAAYC,SAASZ,GAEjCzB,EAAc5B,EAAK2D,IAAIO,SAC3BF,EAAYG,IACZb,EAAYc,SAEdvC,EAAeD,GAZQ8B,EAAAlB,KAAA,GAaIZ,EAAYyC,QAAQpD,eAAeqD,OAbvC,QAajBrD,EAbiByC,EAAAG,KAcvB3C,EAAgBD,GAChBpB,QAAQC,IAAImB,GAEHwC,EAAI,EAjBU,aAiBPA,GAAKxC,GAjBE,CAAAyC,EAAAlB,KAAA,gBAAAkB,EAAAlB,KAAA,GAkBCZ,EAAYyC,QAAQzF,SAAS6E,GAAGa,OAlBjC,QAkBflF,EAlBesE,EAAAG,KAmBrBjF,EAAS2F,KAAKnF,GAnBO,QAiBYqE,IAjBZC,EAAAlB,KAAA,iBAqBvBnB,EAAYzC,GACZ6C,GAAW,GAtBYiC,EAAAlB,KAAA,iBAwBvBzC,OAAO8C,MAAM,0DAxBU,yBAAAa,EAAAZ,SAAAK,MAAH,yBAAAD,EAAAH,MAAAC,KAAAC,YAAA,GAiDxB,OACEtF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2G,EAAD,CAAQ9G,QAASA,IACjBC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAA,QAAM4G,KAAK,OAAO3G,UAAU,oBACzB0D,EACC7D,EAAAC,EAAAC,cAAA,OAAKK,GAAG,SAASJ,UAAU,eACzBH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,eAAb,eAGFH,EAAAC,EAAAC,cAAC6G,EAAD,CACE9F,SAAUA,EACVF,cAlCQ,SAACK,EAAMC,GAC3ByC,GAAW,GACX5B,QAAQC,IAAImB,GACZW,EAAYyC,QACT3F,cAAcK,EAAMC,GACpB2F,KAAK,CAAEC,KAAMlH,IACbmH,KAAK,UAAW,SAACC,GAChBrD,GAAW,MA4BH9C,gBAxBU,SAACT,EAAIc,GAC3ByC,GAAW,GACXG,EAAYyC,QACT1F,gBAAgBT,GAChByG,KAAK,CAAEC,KAAMlH,EAASgC,MAAOV,IAC7B6F,KAAK,UAAW,SAACC,GAChBrD,GAAW,MAmBH/D,QAASA,SC5FzBqH,IAASC,OAAOrH,EAAAC,EAAAC,cAACoH,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.405de2fc.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Identicon from \"identicon.js\";\r\n\r\nconst Navbar = ({ account }) => {\r\n  return (\r\n    <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\r\n      <a\r\n        className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\r\n        href=\"http://www.dappuniversity.com/bootcamp\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        Dapp University\r\n      </a>\r\n\r\n      <ul className=\"navbar-nav px-3\">\r\n        <li className=\"nav-item text-nowrap d-none d-sm-none d-sm-block\">\r\n          <small className=\"text-white\">\r\n            <small id=\"account\">{account}</small>\r\n          </small>\r\n\r\n          {account ? (\r\n            <img\r\n              className=\"ml-2\"\r\n              width=\"30\"\r\n              height=\"30\"\r\n              src={`data:image/png;base64,${new Identicon(\r\n                account,\r\n                30\r\n              ).toString()}`}\r\n            />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { useState } from \"react\";\r\n\r\nconst Main = ({ createProduct, purchaseProduct, products, account }) => {\r\n  const [product, setProduct] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n  });\r\n\r\n  const { name, price } = product;\r\n\r\n  const onChange = (e) => {\r\n    setProduct({ ...product, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(name, window.web3.utils.toWei(price.toString(), \"Ether\"));\r\n    createProduct(name, window.web3.utils.toWei(price.toString(), \"Ether\"));\r\n  };\r\n\r\n  return (\r\n    <div id=\"content\">\r\n      <h1>Add Product</h1>\r\n      <form onSubmit={onSubmit}>\r\n        <div className=\"form-group mr-sm-2\">\r\n          <input\r\n            id=\"productName\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Product Name\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={onChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group mr-sm-2\">\r\n          <input\r\n            id=\"productPrice\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Product Price\"\r\n            name=\"price\"\r\n            value={price}\r\n            onChange={onChange}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Add Product\r\n        </button>\r\n      </form>\r\n      <p>&nbsp;</p>\r\n      <h2>Buy Product</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">#</th>\r\n            <th scope=\"col\">Name</th>\r\n            <th scope=\"col\">Price</th>\r\n            <th scope=\"col\">Owner</th>\r\n            <th scope=\"col\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id=\"productList\">\r\n          {products.map((product, key) => {\r\n            return (\r\n              <tr key={key}>\r\n                <th scope=\"row\">{product.id.toString()}</th>\r\n                <td>{product.name}</td>\r\n                <td>\r\n                  {window.web3.utils.fromWei(product.price.toString(), \"Ether\")}{\" \"}\r\n                  Eth\r\n                </td>\r\n                <td>{product.owner}</td>\r\n                <td>\r\n                  {account !== product.owner ? (\r\n                    <button\r\n                      className=\"btn btn-primary\"\r\n                      name={product.id}\r\n                      value={product.price}\r\n                      onClick={(event) => {\r\n                        purchaseProduct(event.target.name, event.target.value);\r\n                      }}\r\n                    >\r\n                      Buy\r\n                    </button>\r\n                  ) : (\r\n                    <button className=\"btn btn-success\">Owned</button>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { useEffect, useState, Component } from \"react\";\r\nimport Web3 from \"web3\";\r\nimport \"./App.css\";\r\nimport Marketplace from \"../abis/Marketplace.json\";\r\nimport Navbar from \"./Navbar\";\r\nimport Main from \"./Main\";\r\n\r\nconst App = () => {\r\n  const [account, setAccount] = useState(\"\");\r\n  const [productCount, setProductCount] = useState(null);\r\n  const [products, setproducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [marketplace, setMarketPlace] = useState({});\r\n\r\n  useEffect(() => {\r\n    loadWeb3();\r\n    loadBlockchainData();\r\n    //esl\r\n  }, []);\r\n\r\n  const loadWeb3 = async () => {\r\n    if (window.ethereum) {\r\n      window.web3 = new Web3(window.ethereum);\r\n      await window.ethereum.enable();\r\n    } else if (window.web3) {\r\n      window.web3 = new Web3(window.web3.currentProvider);\r\n    } else {\r\n      window.alert(\r\n        \"Non-Ethereum browser detected. You should consider trying MetaMask!\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const loadBlockchainData = async () => {\r\n    const web3 = window.web3;\r\n    // Load account\r\n    const accounts = await web3.eth.getAccounts();\r\n    setAccount(accounts[0]);\r\n    const networkId = await web3.eth.net.getId();\r\n    const networkData = Marketplace.networks[networkId];\r\n    if (1) {\r\n      const marketplace = web3.eth.Contract(\r\n        Marketplace.abi,\r\n        networkData.address\r\n      );\r\n      setMarketPlace(marketplace);\r\n      const productCount = await marketplace.methods.productCount().call();\r\n      setProductCount(productCount);\r\n      console.log(productCount);\r\n      // Load products\r\n      for (var i = 1; i <= productCount; i++) {\r\n        const product = await marketplace.methods.products(i).call();\r\n        products.push(product);\r\n      }\r\n      setproducts(products);\r\n      setLoading(false);\r\n    } else {\r\n      window.alert(\"Marketplace contract not deployed to detected network.\");\r\n    }\r\n  };\r\n\r\n  const createProduct = (name, price) => {\r\n    setLoading(true);\r\n    console.log(productCount);\r\n    marketplace.methods\r\n      .createProduct(name, price)\r\n      .send({ from: account })\r\n      .once(\"receipt\", (receipt) => {\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const purchaseProduct = (id, price) => {\r\n    setLoading(true);\r\n    marketplace.methods\r\n      .purchaseProduct(id)\r\n      .send({ from: account, value: price })\r\n      .once(\"receipt\", (receipt) => {\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Navbar account={account} />\r\n      <div className=\"container-fluid mt-5\">\r\n        <div className=\"row\">\r\n          <main role=\"main\" className=\"col-lg-12 d-flex\">\r\n            {loading ? (\r\n              <div id=\"loader\" className=\"text-center\">\r\n                <p className=\"text-center\">Loading...</p>\r\n              </div>\r\n            ) : (\r\n              <Main\r\n                products={products}\r\n                createProduct={createProduct}\r\n                purchaseProduct={purchaseProduct}\r\n                account={account}\r\n              />\r\n            )}\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}